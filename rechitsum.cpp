{
    // Import files
    TFile* f1 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_5GeV_d010.root");
    TFile* f2 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_10GeV_d010.root");
    TFile* f3 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_15GeV_d010.root");
    TFile* f4 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_20GeV_d010.root");
    TFile* f5 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_30GeV_d010.root");
    TFile* f6 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_40GeV_d010.root");
    TFile* f7 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_60GeV_d010.root");
    TFile* f8 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_80GeV_d010.root");
    TFile* f9 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_100GeV_d010.root");
    TFile* f10 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_140GeV_d010.root");
    TFile* f11 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_200GeV_d010.root");
    TFile* f12 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_280GeV_d010.root");
    TFile* f13 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_400GeV_d010.root");
    TFile* f14 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_550GeV_d010.root");
    TFile* f15 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_750GeV_d010.root");
    TFile* f16 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_1000GeV_d010.root");
    TFile* f17 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_1400GeV_d010.root");
    TFile* f18 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_2000GeV_d010.root");
    TFile* f19 = TFile::Open("data/cmssw/RegressionResults/flatRegressionResult_2800GeV_d010.root");

    // Import histograms
    TH1F* h1 = (TH1F*)f1->Get("h_nodead");
    TH1F* h2 = (TH1F*)f2->Get("h_nodead");
    TH1F* h3 = (TH1F*)f3->Get("h_nodead");
    TH1F* h4 = (TH1F*)f4->Get("h_nodead");
    TH1F* h5 = (TH1F*)f5->Get("h_nodead");
    TH1F* h6 = (TH1F*)f6->Get("h_nodead");
    TH1F* h7 = (TH1F*)f7->Get("h_nodead");
    TH1F* h8 = (TH1F*)f8->Get("h_nodead");
    TH1F* h9 = (TH1F*)f9->Get("h_nodead");
    TH1F* h10 = (TH1F*)f10->Get("h_nodead");
    TH1F* h11 = (TH1F*)f11->Get("h_nodead");
    TH1F* h12 = (TH1F*)f12->Get("h_nodead");
    TH1F* h13 = (TH1F*)f13->Get("h_nodead");
    TH1F* h14 = (TH1F*)f14->Get("h_nodead");
    TH1F* h15 = (TH1F*)f15->Get("h_nodead");
    TH1F* h16 = (TH1F*)f16->Get("h_nodead");
    TH1F* h17 = (TH1F*)f17->Get("h_nodead");
    TH1F* h18 = (TH1F*)f18->Get("h_nodead");
    TH1F* h19 = (TH1F*)f19->Get("h_nodead");

/*
    // Define fit functions
    TF1* tstud = new TF1("tstud","[0]*sqrt([3])*TMath::Gamma(([2]+1)/2)*(1+[3]*(x-[1])^2/[2])**(-0.5*([2]+1))/(sqrt(TMath::Pi()*[2])*TMath::Gamma(0.5*[2]))",20,55);
    tstud->SetParNames("Scale","#mu","#nu","#lambda");
    tstud->SetParameters(100,30,1,1);
    tstud->SetParLimits(0,0.1,15000);
    tstud->SetParLimits(1,2,50);
    tstud->SetParLimits(2,0.1,10);
*/

    TF1* g1 = new TF1("g1","gaus");
    TF1* g2 = new TF1("g2","gaus");
    TF1* g3 = new TF1("g3","gaus");
    TF1* g4 = new TF1("g4","gaus");
    TF1* g5 = new TF1("g5","gaus");
    TF1* g6 = new TF1("g6","gaus");
    TF1* g7 = new TF1("g7","gaus");
    TF1* g8 = new TF1("g8","gaus");
    TF1* g9 = new TF1("g9","gaus");
    TF1* g10 = new TF1("g10","gaus");
    TF1* g11 = new TF1("g11","gaus");
    TF1* g12 = new TF1("g12","gaus");
    TF1* g13 = new TF1("g13","gaus");
    TF1* g14 = new TF1("g14","gaus");
    TF1* g15 = new TF1("g15","gaus");
    TF1* g16 = new TF1("g16","gaus");
    TF1* g17 = new TF1("g17","gaus");
    TF1* g18 = new TF1("g18","gaus");
    TF1* g19 = new TF1("g19","gaus");

    g1->SetNpx(200);
    g2->SetNpx(200);
    g3->SetNpx(200);
    g4->SetNpx(200);
    g5->SetNpx(200);
    g6->SetNpx(200);
    g7->SetNpx(200);
    g8->SetNpx(200);
    g9->SetNpx(200);
    g10->SetNpx(200);
    g11->SetNpx(200);
    g12->SetNpx(200);
    g13->SetNpx(200);
    g14->SetNpx(200);
    g15->SetNpx(200);
    g16->SetNpx(200);
    g17->SetNpx(200);
    g18->SetNpx(200);
    g19->SetNpx(200);

    h1->Rebin(10);
    h2->Rebin(8);
    h3->Rebin(8);
    h4->Rebin(8);
    h5->Rebin(8);
    h6->Rebin(4);
    h7->Rebin(4);
    h8->Rebin();
    h9->Rebin();
    h10->Rebin();
    h11->Rebin();
    h12->Rebin();
    h13->Rebin();
    h14->Rebin();
    h15->Rebin();
    h16->Rebin();
    h17->Rebin();
    h18->Rebin();
    h19->Rebin();

    gStyle->SetOptStat(00000000);
    gStyle->SetOptFit(1111);
    TCanvas* c1 = new TCanvas("c1","c1",1000,600);
    TCanvas* c2 = new TCanvas("c2","c2",1000,600);
    TCanvas* c3 = new TCanvas("c3","c3",1000,600);
    TCanvas* c4 = new TCanvas("c4","c4",1000,600);
    TCanvas* c5 = new TCanvas("c5","c5",1000,600);
    Bool_t setlog = false;
    c1->Divide(2,2);
    c2->Divide(2,2);
    c3->Divide(2,2);
    c4->Divide(2,2);
    c5->Divide(2,2);
    if (setlog) {
        c1->cd(1)->SetLogy();
        c1->cd(2)->SetLogy();
        c1->cd(3)->SetLogy();
        c1->cd(4)->SetLogy();
    }

    c1->cd(1);
    h1->GetXaxis()->SetRangeUser(1,7.5);
    h1->Draw(); h1->SetTitle("rechit Energy 5 GeV;Energy [GeV];Hits");
    h1->Fit("g1");
    h1->Fit("g1","","",g1->GetParameter(1)-1.6*g1->GetParameter(2),g1->GetParameter(1)+3*g1->GetParameter(2));
    c1->cd(2);
    h2->GetXaxis()->SetRangeUser(2,14);
    h2->Draw(); h2->SetTitle("rechit Energy 10 GeV;Energy [GeV];Hits");
    h2->Fit("g2");
    h2->Fit("g2","","",g2->GetParameter(1)-1.6*g2->GetParameter(2),g2->GetParameter(1)+3*g2->GetParameter(2));
    c1->cd(3);
    h3->GetXaxis()->SetRangeUser(6,20);
    h3->Draw(); h3->SetTitle("rechit Energy 15 GeV;Energy [GeV];Hits");
    h3->Fit("g3");
    h3->Fit("g3","","",g3->GetParameter(1)-1.6*g3->GetParameter(2),g3->GetParameter(1)+3*g3->GetParameter(2));
    c1->cd(4);
    h4->GetXaxis()->SetRangeUser(10,28);
    h4->Draw(); h4->SetTitle("rechit Energy 20 GeV;Energy [GeV];Hits");
    h4->Fit("g4");
    h4->Fit("g4","","",g4->GetParameter(1)-1.6*g4->GetParameter(2),g4->GetParameter(1)+3*g4->GetParameter(2));
    c2->cd(1);
    h5->GetXaxis()->SetRangeUser(15,40);
    h5->Draw(); h5->SetTitle("rechit Energy 30 GeV;Energy [GeV];Hits");
    h5->Fit("g5");
    h5->Fit("g5","","",g5->GetParameter(1)-1.6*g5->GetParameter(2),g5->GetParameter(1)+3*g5->GetParameter(2));
    c2->cd(2);
    h6->GetXaxis()->SetRangeUser(20,50);
    h6->Draw(); h6->SetTitle("rechit Energy 40 GeV;Energy [GeV];Hits");
    h6->Fit("g6");
    h6->Fit("g6","","",g6->GetParameter(1)-1.6*g6->GetParameter(2),g6->GetParameter(1)+3*g6->GetParameter(2));
    c2->cd(3);
    h7->GetXaxis()->SetRangeUser(40,80);
    h7->Draw(); h7->SetTitle("rechit Energy 60 GeV;Energy [GeV];Hits");
    h7->Fit("g7");
    h7->Fit("g7","","",g7->GetParameter(1)-1.6*g7->GetParameter(2),g7->GetParameter(1)+3*g7->GetParameter(2));
    c2->cd(4);
    h8->GetXaxis()->SetRangeUser(60,100);
    h8->Draw(); h8->SetTitle("rechit Energy 80 GeV;Energy [GeV];Hits");
    h8->Fit("g8");
    h8->Fit("g8","","",g8->GetParameter(1)-1.6*g8->GetParameter(2),g8->GetParameter(1)+3*g8->GetParameter(2));
    c3->cd(1);
    h9->GetXaxis()->SetRangeUser(80,120);
    h9->Draw(); h9->SetTitle("rechit Energy 100 GeV;Energy [GeV];Hits");
    h9->Fit("g9");
    h9->Fit("g9","","",g9->GetParameter(1)-1.6*g9->GetParameter(2),g9->GetParameter(1)+3*g9->GetParameter(2));
    c3->cd(2);
    h10->GetXaxis()->SetRangeUser(110,170);
    h10->Draw(); h10->SetTitle("rechit Energy 140 GeV;Energy [GeV];Hits");
    h10->Fit("g10");
    h10->Fit("g10","","",g10->GetParameter(1)-1.6*g10->GetParameter(2),g10->GetParameter(1)+3*g10->GetParameter(2));
    c3->cd(3);
    h11->GetXaxis()->SetRangeUser(160,240);
    h11->Draw(); h11->SetTitle("rechit Energy 200 GeV;Energy [GeV];Hits");
    h11->Fit("g11");
    h11->Fit("g11","","",g11->GetParameter(1)-1.6*g11->GetParameter(2),g11->GetParameter(1)+3*g11->GetParameter(2));
    c3->cd(4);
    h12->GetXaxis()->SetRangeUser(240,320);
    h12->Draw(); h12->SetTitle("rechit Energy 280 GeV;Energy [GeV];Hits");
    h12->Fit("g12");
    h12->Fit("g12","","",g12->GetParameter(1)-1.4*g12->GetParameter(2),g12->GetParameter(1)+3*g12->GetParameter(2));
    c4->cd(1);
    h13->GetXaxis()->SetRangeUser(360,440);
    h13->Draw(); h13->SetTitle("rechit Energy 400 GeV;Energy [GeV];Hits");
    h13->Fit("g13");
    h13->Fit("g13","","",g13->GetParameter(1)-1.1*g13->GetParameter(2),g13->GetParameter(1)+3*g13->GetParameter(2));
    c4->cd(2);
    h14->GetXaxis()->SetRangeUser(500,600);
    h14->Draw(); h14->SetTitle("rechit Energy 550 GeV;Energy [GeV];Hits");
    h14->Fit("g14");
    h14->Fit("g14","","",g14->GetParameter(1)-0.8*g14->GetParameter(2),g14->GetParameter(1)+3*g14->GetParameter(2));
    c4->cd(3);
    h15->GetXaxis()->SetRangeUser(650,850);
    h15->Draw(); h15->SetTitle("rechit Energy 750 GeV;Energy [GeV];Hits");
    h15->Fit("g15");
    h15->Fit("g15","","",g15->GetParameter(1)-0.8*g15->GetParameter(2),g15->GetParameter(1)+3*g15->GetParameter(2));
    c4->cd(4);
    h16->GetXaxis()->SetRangeUser(800,1100);
    h16->Draw(); h16->SetTitle("rechit Energy 1000 GeV;Energy [GeV];Hits");
    h16->Fit("g16");
    h16->Fit("g16","","",g16->GetParameter(1)-3.0*g16->GetParameter(2),g16->GetParameter(1)+0.8*g16->GetParameter(2));
    c5->cd(1);
    h17->GetXaxis()->SetRangeUser(1000,1600);
    h17->Draw(); h17->SetTitle("rechit Energy 1400 GeV;Energy [GeV];Hits");
    h17->Fit("g17");
    h17->Fit("g17","","",g17->GetParameter(1)-3.0*g17->GetParameter(2),g17->GetParameter(1)+0.8*g17->GetParameter(2));
    c5->cd(2);
    h18->GetXaxis()->SetRangeUser(1200,2000);
    h18->Draw(); h18->SetTitle("rechit Energy 2000 GeV;Energy [GeV];Hits");
    h18->Fit("g18");
    h18->Fit("g18","","",g18->GetParameter(1)-3.0*g18->GetParameter(2),g18->GetParameter(1)+0.8*g18->GetParameter(2));
    c5->cd(3);
    h19->GetXaxis()->SetRangeUser(1700,2500);
    h19->Draw(); h19->SetTitle("rechit Energy 2800 GeV;Energy [GeV];Hits");
    h19->Fit("g19");
    h19->Fit("g19","","",g19->GetParameter(1)-3.0*g19->GetParameter(2),g19->GetParameter(1)+0.8*g19->GetParameter(2));

    if (setlog) c->Print("plots/rechitsum.eps");
    //else c->Print("plots/rechitsum_deadfrac050_av.eps");
}
